<!doctype html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" type="text/css" href="index.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <title>Terrorist Map</title>
</head>

<body>
  <div id="sidebar">
    <a onclick="openSearch()"><i class="fa fa-fw fa-search"></i></a>
    <a onclick="openList()"><i class="fa fa-fw fa-list"></i></a>
    <a onclick="openSave()"><i class="fa fa-floppy-o" aria-hidden="true"></i></a>
    <a href="CharColour.html"><i class="fa fa-info-circle"></i></a>
  </div>
  <div id="map">
  </div>
  <div id="searchside">
    <a id="close" onclick="closeNav()"><button id="closebtn">X</button></a>
    <div id="select1">
      <label for="countryChoose">Choose a country:</label>
      <select id="countryChoose" onchange="filter()"></select></div>
    <div id="select2">
      <label for="yearChoose">Choose a year:</label>
      <select id="yearChoose" onchange="filter()"></select></div>
    <div id="select3">
      <label for="weaponChoose">Choose a weapon:</label>
      <select id="weaponChoose" onchange="filter()"></select></div>
    <ul id="lista" style="list-style-type:none;">

    </ul>
  </div>
  <div id="listside">
    <a id="close" onclick="closeNav()"><button id="closebtn">X</button></a>
    <ul id="lista1" style="list-style-type:none;">

    </ul>

  </div>
  <div id="saveside">
    <a id="close" onclick="closeNav()"><button id="closebtn">X</button></a>
    <div id="butoane">
      <button class="btn btn1">CSV</button>
      <button class="btn btn2">SVG</button>
      <button class="btn btn3">PNG</button>

    </div>
  </div>
  <script>
    function openSearch() {
      document.getElementById("searchside").style.width = "20rem";
      document.getElementById("listside").style.width = "0%";
      document.getElementById("saveside").style.width = "0%";

    }
    function openList() {
      document.getElementById("listside").style.width = "20rem";
      document.getElementById("searchside").style.width = "0%";
      document.getElementById("saveside").style.width = "0%";

    }
    function openSave() {
      document.getElementById("saveside").style.width = "20rem";
      document.getElementById("searchside").style.width = "0%";
      document.getElementById("listside").style.width = "0%";
    }
    function closeNav() {
      document.getElementById("searchside").style.width = "0";
      document.getElementById("listside").style.width = "0";
      document.getElementById("saveside").style.width = "0";
    }
    function filter() {
      input1 = document.getElementById('countryChoose');
      input2 = document.getElementById('yearChoose');
      input3 = document.getElementById('weaponChoose');
      filter1 = input1.value.toUpperCase();
      filter2 = input2.value.toUpperCase();
      filter3 = input3.value.toUpperCase();
      ul = document.getElementById("lista");
      li = ul.getElementsByTagName('li');
      for (i = 0; i < li.length; i++) {
        a1 = li[i].getElementsByTagName("a")[0];
        txt1 = a1.textContent || a1.innerText;
        a2 = li[i].getElementsByTagName("a")[1];
        txt2 = a2.textContent || a2.innerText;
        a3 = li[i].getElementsByTagName("a")[2];
        txt3 = a3.textContent || a3.innerText;
        if (filter1 == 'ANY') filter1 = '';
        if (filter2 == 'ANY') filter2 = '';
        if (filter3 == 'ANY') filter3 = '';
        if (txt1.toUpperCase().indexOf(filter1) > -1 && txt2.toUpperCase().indexOf(filter2) > -1 && txt3.toUpperCase().indexOf(filter3) > -1) {
          li[i].style.display = "";
        } else {
          li[i].style.display = "none";
        }
      }
    }
    function initMap() {
      var mapPointsGermany = [{ lat: 15.344, lng: 131.036 }, { lat: 35.344, lng: 120.036 }, { lat: 45.344, lng: 140.036 }, { lat: 55.344, lng: 100.036 }, { lat: 65.344, lng: 90.036 }]
      var mapInitPos = { lat: 25.344, lng: 131.036 };
      var points = [];
      var map = new google.maps.Map(
        document.getElementById('map'), { zoom: 4, center: mapInitPos });
      //var marker = new google.maps.Marker({position: mapInitPos, map: map});
      var mark = new google.maps.Marker({ position: mapInitPos, map: map });
      mark.setMap(map);
      for (var i = 0; i < mapPointsGermany.length; i++) {
        var pt = new google.maps.Marker({ position: mapPointsGermany[i] });
        pt.setMap(map);
        points.push(pt);
      }
    }

    function addCountry(x) {
      var addToCountry = document.getElementById("countryChoose");
      var option = document.createElement("option");
      option.text = x;
      addToCountry.add(option);
    }
    function addYear(x) {
      var addToYear = document.getElementById("yearChoose");
      var option = document.createElement("option");
      option.text = x;
      addToYear.add(option);
    }
    function addWeapon(x) {
      var addToWeapon = document.getElementById("weaponChoose");
      var option = document.createElement("option");
      option.text = x;
      addToWeapon.add(option);
    }
    function addToList(list, ctr, yr, wp) {
      var li = document.createElement("li");
      var a1 = document.createElement("a");
      a1.className = "country";
      li.appendChild(a1);
      a1.text = ctr;
      var a2 = document.createElement("a");
      a2.className = "year";
      li.appendChild(a2);
      a2.text = yr;
      var a3 = document.createElement("a");
      a3.className = "country";
      li.appendChild(a3);
      a3.text = wp;
      document.getElementById(list).appendChild(li);
    }
    var input = [["Romania", 1999, "Gas"], ["France", 2000, "Explosives"], ["Germany", 1976, "Gas"], ["Romania", 1983, "Gas"], ["France", 2008, "Explosives"], ["Germany", 1972, "Axe"], ["Netherlands", 1999, "Axe"], ["China", 2020, "Gun"], ["Germany", 1979, "Unknown"], ["Romania", 1976, "Unknown"], ["France", 1976, "Explosives"], ["Germany", 2020, "Gas"], ["Romania", 1999, "Axe"], ["France", 2000, "Explosives"], ["Germany", 1976, "Gas"]];
    for (i in input) {
      addToList("lista", input[i][0], input[i][1], input[i][2]);
      addToList("lista1", input[i][0], input[i][1], input[i][2]);
    }
    var countries = ["Any", "Romania", "France", "Germany", "China", "Netherlands", "Spain", "Russia", "USA"];
    for (i in countries) {
      addCountry(countries[i]);
    }
    var years = ["Any", 1972, 1976, 1980, 1989, 1993, 1999, 2000, 2002, 2008, 2012, 2015, 2020];
    for (i in years) {
      addYear(years[i]);
    }
    var weapons = ["Any", "Axe", "Explosives", "Gas", "Gun", "Unknown"];
    for (i in weapons) {
      addWeapon(weapons[i]);
    }
  </script>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDtKxEnjmFmud3qf7EQAxdvUyDGrbxhXeo&callback=initMap"></script>
</body>

</html>